<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>X-Streamify — Library</title>

  <!-- IMPORTANT: the leading slash makes sure the CSS loads -->
  <link rel="stylesheet" href="/tailwind.css" />

  <style>
    .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
    .shadow-soft { box-shadow: 0 10px 20px rgba(0,0,0,.15); }
    /* Hide admin-only controls */
    [data-hide]{ display:none !important; }
  </style>

  <!-- Your app JS -->
  <script type="module" defer src="/js/phase10.js"></script>
</head>
<body class="bg-neutral-950 text-neutral-100 antialiased">
  <!-- Header -->
  <header class="w-full border-b border-neutral-800 sticky top-0 bg-neutral-950/80 backdrop-blur z-50">
    <div class="container flex items-center justify-between py-3">
      <div class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-lg bg-red-600 grid place-items-center font-black text-xl leading-none">X</div>
        <span class="text-xl md:text-2xl font-semibold tracking-tight">X-Streamify</span>
      </div>

      <nav class="hidden md:flex items-center gap-2 text-sm">
        <button data-nav="featured" class="nav-btn px-3 py-2 rounded-xl border border-red-600 text-red-400">Home</button>
        <button data-nav="library"  class="nav-btn px-3 py-2 rounded-xl border border-neutral-700">My Library</button>
        <button data-nav="add"      class="nav-btn px-3 py-2 rounded-xl border border-neutral-700">Add to Library</button>
        <button data-nav="vault"    class="nav-btn px-3 py-2 rounded-xl border border-neutral-700">Your Vault</button>
      </nav>

      <!-- Admin-only (hidden) -->
      <div class="flex items-center gap-2" data-hide>
        <button id="btn-export" class="px-3 py-2 text-sm rounded-xl border border-neutral-700">Export JSON</button>
        <label for="import-input" class="px-3 py-2 text-sm rounded-xl border border-neutral-700 cursor-pointer">
          Import JSON
          <input id="import-input" type="file" accept="application/json" class="hidden" />
        </label>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="container space-y-12 py-8">
    <!-- Hero -->
    <section id="hero" class="grid md:grid-cols-2 gap-8 items-center">
      <div>
        <h1 class="text-3xl md:text-5xl font-extrabold leading-tight">
          Your personal streaming library.
        </h1>
        <p class="mt-3 text-neutral-300">
          Add your movies with a poster and a link to play them. Favorite what you love.
        </p>

        <div class="mt-6 space-y-3">
          <div class="flex gap-2">
            <input id="global-search" class="w-full px-4 py-3 rounded-xl bg-neutral-900 border border-neutral-800"
                   placeholder="Search your library…" />
            <button id="search-clear" class="px-3 py-2 rounded-xl border border-neutral-700">Clear</button>
          </div>
          <div class="flex flex-wrap gap-2">
            <button data-quick="recent" class="px-3 py-2 text-sm rounded-xl border border-neutral-700">Recently Added</button>
            <button data-quick="fav"    class="px-3 py-2 text-sm rounded-xl border border-neutral-700">Favorites</button>
            <button data-quick="all"    class="px-3 py-2 text-sm rounded-xl border border-neutral-700">All</button>
          </div>
        </div>
      </div>

      <div class="rounded-2xl border border-neutral-800 p-4 shadow-soft">
        <div class="aspect-video rounded-xl bg-neutral-900 grid place-items-center">
          <span class="opacity-60">Welcome to your library</span>
        </div>
        <div class="mt-4">
          <h3 class="text-xl font-semibold">Tip</h3>
          <p class="text-neutral-400 text-sm">Click a poster to play the movie in a new tab.</p>
        </div>
      </div>
    </section>

    <!-- Featured -->
    <section id="section-featured" class="space-y-4">
      <div class="flex items-center justify-between">
        <h2 class="text-2xl font-bold">Featured</h2>
        <div class="text-sm text-neutral-400">A few picks from your library</div>
      </div>
      <div id="featured-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"></div>
    </section>

    <!-- My Library -->
    <section id="section-library" class="space-y-4 hidden">
      <div class="flex items-center justify-between">
        <h2 class="text-2xl font-bold">My Library</h2>
        <div class="flex items-center gap-2 text-sm">
          <button data-filter="all"    class="lib-filter px-3 py-1 rounded-lg border border-neutral-700">All</button>
          <button data-filter="recent" class="lib-filter px-3 py-1 rounded-lg border border-neutral-700">Recently Added</button>
          <button data-filter="fav"    class="lib-filter px-3 py-1 rounded-lg border border-neutral-700">Favorites</button>
        </div>
      </div>
      <div id="library-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"></div>
    </section>

    <!-- Add a New Movie -->
    <section id="section-add" class="space-y-4 hidden">
      <h2 class="text-2xl font-bold">Add to Library</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <form id="add-form" class="rounded-2xl border border-neutral-800 p-4 space-y-3">
          <div>
            <label class="block text-sm mb-1">Title</label>
            <input name="title" required class="w-full px-3 py-2 rounded-xl bg-neutral-900 border border-neutral-800" placeholder="e.g., Inception" />
          </div>
          <div>
            <label class="block text-sm mb-1">Poster URL</label>
            <input name="poster" class="w-full px-3 py-2 rounded-xl bg-neutral-900 border border-neutral-800" placeholder="/img/inception.jpg or https://…" />
          </div>
          <div>
            <label class="block text-sm mb-1">Play URL</label>
            <input name="url" class="w-full px-3 py-2 rounded-xl bg-neutral-900 border border-neutral-800" placeholder="/media/inception.mp4 or https://…" />
          </div>
          <div class="flex gap-2">
            <button class="px-4 py-2 rounded-xl bg-red-600" type="submit">Add</button>
            <button id="add-reset" class="px-4 py-2 rounded-xl border border-neutral-700" type="button">Reset</button>
          </div>
          <p id="add-msg" class="text-sm text-neutral-400"></p>
        </form>

        <div class="rounded-2xl border border-neutral-800 p-4">
          <div class="aspect-video rounded-xl bg-neutral-900 grid place-items-center">
            <span class="opacity-60">Posters show in your grids</span>
          </div>
          <p class="text-neutral-400 text-sm mt-3">
            Click a poster to play the movie in a new tab.
          </p>
        </div>
      </div>
    </section>

    <!-- Your Vault -->
    <section id="section-vault" class="space-y-6 hidden">
      <div class="flex items-center justify-between">
        <h2 class="text-2xl font-bold">Your Vault</h2>
        <div class="text-sm text-neutral-400"><span id="vault-count">0</span> items</div>
      </div>

      <div class="grid md:grid-cols-[220px_1fr] gap-6">
        <aside class="rounded-2xl border border-neutral-800 p-4 h-fit">
          <h3 class="font-semibold mb-3">Folders</h3>
          <ul class="space-y-1 text-sm">
            <li><button data-vfolder="all"        class="w-full text-left px-2 py-1 rounded-lg border border-neutral-800">All</button></li>
            <li><button data-vfolder="recent"     class="w-full text-left px-2 py-1 rounded-lg border border-neutral-800">Recently Added</button></li>
            <li><button data-vfolder="favorites"  class="w-full text-left px-2 py-1 rounded-lg border border-neutral-800">Favorites</button></li>
          </ul>
        </aside>

        <div>
          <div class="flex items-center justify-between mb-3">
            <h3 id="vault-heading" class="font-semibold">Movies / All</h3>
          </div>
          <div id="vault-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded-xl bg-neutral-900 border border-neutral-800 shadow-soft text-sm hidden"></div>

  <!-- Card template -->
  <template id="card-tpl">
    <div class="group relative rounded-2xl overflow-hidden border border-neutral-800 bg-neutral-900">
      <div class="poster relative bg-neutral-950">
        <div class="pt-[150%]"></div>
        <span class="absolute inset-0 grid place-items-center opacity-50 text-xs">No Poster</span>
      </div>
      <div class="absolute top-2 right-2">
        <button class="fav-btn h-8 w-8 rounded-full bg-neutral-950/70 border border-neutral-800 grid place-items-center focus:outline-none">♡</button>
      </div>
      <div class="p-2">
        <div class="title line-clamp-1 text-sm font-medium">Title</div>
      </div>
    </div>
  </template>
</body>
</html>
