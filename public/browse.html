<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>X-Streamify â€” Your Library</title>
  <meta name="theme-color" content="#0a0a0a"/>
<link rel="icon" type="image/png" href="img/favicon-32x32.png">
<link rel="stylesheet" href="css/styles.css">
<style>#search-results { color:#fff; font-size:1rem; margin-top:12px; padding-left:5px; }</style>




  <style>
    :root{
      --bg:#0a0a0a; --panel:#101012; --panel2:#141416; --muted:#a9a9a9; --line:rgba(255,255,255,.12);
      --brand:#e11d2f; --brand-soft:rgba(225,29,47,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:
radial-gradient(900px 420px at 85% -10%, rgb(0, 255, 0), transparent 30%),
radial-gradient(700px 380px at -10% 110%, rgb(0, 255, 0), transparent 60%),
        var(--bg);
      color:#fff;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial
    }
    .wrap{max-width:1320px;margin:0 auto;padding:20px 24px 60px}
    header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .mark{width:34px;height:34px;border-radius:10px;background:#1a1a1b;box-shadow:0 0 22px var(--brand-soft) inset}
    .nav{display:flex;justify-content:center;gap:18px}
    .nav a{color:#e9e9e9;text-decoration:none;opacity:.9}
    .nav a:hover{opacity:1}
    .right{display:flex;justify-content:flex-end;align-items:center;gap:10px}
.addBtn { background: #161617; border: 1px solid rgba(255, 255, 255, 0.18); border-radius: 10px; padding: 8px 12px; cursor: pointer; color: #fff; }
.addBtn:hover { border: 2px solid red; box-shadow: 0 0 12px red; }
    @media(min-width:800px){ .addBtn{display:inline-flex} }
    .who{display:flex;align-items:center;gap:10px}
    .who img{width:36px;height:36px;border-radius:50%;object-fit:cover;border:1px solid rgba(255,255,255,.18)}
.btn { background: #161617; border: 1px solid rgba(255, 255, 255, 0.18); color: #fff; border-radius: 10px; padding: 8px 12px; cursor: pointer; box-sizing: border-box; }
.btn:hover { box-shadow: 0 0 12px red; }
    h1{margin:18px 0 6px;font-size:28px}
    .muted{color:var(--muted);font-size:14px}

    /* Hero */
    .hero{display:grid;grid-template-columns:1.2fr .8fr;gap:20px;margin-top:18px}
    @media(max-width:900px){ .hero{grid-template-columns:1fr} }
    .heroCard{
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
      border:1px solid var(--line);border-radius:16px;padding:18px 18px 20px;
    }
    .heroImage{
height: 280px; border-radius: 16px; border: 1px solid rgb(0, 255, 0);
      box-shadow: 0 0 32px rgb(0, 255, 0);
background: radial-gradient(800px 320px at 50% -20%, rgb(0, 255, 0), transparent 50%), #0e0e10;
      display:flex;align-items:center;justify-content:center;font-size:22px;opacity:.95
    }
    .searchRow{display:flex;gap:10px;margin-top:14px}
    .searchRow input{
      flex:1;background:#121214;color:#fff;border:1px solid var(--line);border-radius:10px;padding:10px 12px
    }
    .pills{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    .pill{border:1px solid var(--line);border-radius:999px;padding:6px 10px;background:#161617}
    .sections{margin-top:26px;display:grid;gap:28px}

    /* Rails */
    .row h2{margin:0 0 12px;font-size:20px}
    .rail{display:grid;grid-auto-flow:column;grid-auto-columns:minmax(170px,1fr);gap:12px;overflow-x:auto;padding-bottom:6px}
    .tile{background:#151516;border:1px solid rgba(255,255,255,.08);border-radius:12px;height:240px;display:flex;align-items:center;justify-content:center}
    .tile.small{height:160px}

    /* How it Works */
    .steps{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media(max-width:900px){ .steps{grid-template-columns:1fr} }
    .step{background:var(--panel2);border:1px solid var(--line);border-radius:12px;padding:14px}

    /* Add a New Movie */
    .cards{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    @media(max-width:900px){ .cards{grid-template-columns:1fr} }
    .card{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:16px}

    /* Vault */
    .vault{display:grid;grid-template-columns:220px 1fr;gap:16px}
    @media(max-width:1000px){ .vault{grid-template-columns:1fr} }
    .side{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px}
    .folders{display:grid;gap:6px;margin-top:8px}
    .folders button{background:#141416;border:1px solid var(--line);color:#fff;border-radius:10px;padding:8px 10px;text-align:left}
    .tabs{display:flex;gap:8px;margin-bottom:10px}
    .tab{background:#141416;border:1px solid var(--line);border-radius:999px;padding:6px 10px;cursor:pointer}
    .tab.active{border-color:rgba(255,255,255,.28)}
    .grid{display:grid;grid-template-columns:repeat(6,1fr);gap:10px}
    @media(max-width:1100px){ .grid{grid-template-columns:repeat(4,1fr)} }
    @media(max-width:700px){ .grid{grid-template-columns:repeat(2,1fr)} }

    .hr{height:1px;background:var(--line);margin:16px 0}
#movie-grid { margin-top: 10px !important; }
#grid { margin-top: -90px !important; }
#pictures2-grid { margin-top: 20px !important; }

    #search-results { color:#fff; font-size:1rem; margin-top:12px; padding-left:5px; }

  </style>

  <!-- Firebase (compat) + your config -->
<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
<script src="/js/keys.js"></script>
<script>
  window.addEventListener("load", () => {
    // Wait 2 seconds to confirm Firebase has initialized
    setTimeout(() => {
      if (!window.firebase || !window.firebase.auth) {
        console.warn("âš ï¸ Firebase failed to load â€” displaying warning.");
        const warn = document.createElement("div");
        warn.textContent = "âš ï¸ Connection issue â€” please refresh the page.";
        warn.style.position = "fixed";
        warn.style.top = "0";
        warn.style.left = "0";
        warn.style.width = "100%";
        warn.style.background = "#ff4d4d";
        warn.style.color = "#fff";
        warn.style.textAlign = "center";
        warn.style.padding = "10px";
        warn.style.fontSize = "16px";
        warn.style.zIndex = "9999";
        document.body.appendChild(warn);
      }
    }, 2000);
  });
</script>

</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <header>
      <div class="brand">
        <div>
          <div class="flex items-center gap-2">
<img src="/img/red-play-logo-rounded.png" alt="X-Streamify" style="width: 75px; height: auto; position: relative; top: 24px;" />
<span style="font-size: 40px; font-weight: 600; letter-spacing: -0.5px;">Xâ€‘Streamify</span>
</div>




        </div>
      </div>

      <nav class="nav" aria-label="Primary">
  <a href="#featured" aria-current="page">Featured</a>
  <a href="#library">My Library</a>
<a href="#how">How It Works</a>
  <a href="#vault">Your Vault</a>
</nav>


      <div class="right">
<button class="addBtn" style="color: white;" onclick="location.href='add-movie.html'">Add Movies</button>
        <div class="who">
<img id="avatar" src="/img/profile1.png" alt="profile" style="width: 48px; height: 48px; border-radius: 50%;" />
          <span id="whoName">Profile</span>
<button class="btn" id="switch" onclick="try{localStorage.removeItem('xs_profile')}catch(e){};location.href='profiles.html'" style="border: 2px solid rgb(0, 255, 0);">

  Switch
</button>
<button class="btn" id="signout" style="border: 2px solid rgb(0, 255, 0); padding: 8px 12px; color: white; background-color: #000;" onclick="try{localStorage.removeItem('xs_profile')}catch(e){};location.href='sign-in.html'">
  Sign out
</button>
        </div>
      </div>
    </header>

    <!-- Title -->
    <h1>Build your personal streaming library.</h1>
    <div class="muted">Search your collection or add more titles.</div>

    <!-- Hero -->
    <section class="hero" aria-label="Hero">
      <div class="heroCard">
        <div class="searchRow">
<input id="searchInput" placeholder="Search your moviesâ€¦" />
<button id="search-btn" class="btn" data-tab="search">Search</button>
        </div>
        <div id="search-results" class="muted" style="margin-top:10px;"></div>
        <div class="pills" role="list">
<div id="recentlyAdded" class="pill" onclick="alert('âœ¨ Nice taste! Letâ€™s check whatâ€™s fresh out of the oven.')">Recently Added</div>
<div id="favoritesTab" class="pill" style="color: white;" onclick="alert('â¤ï¸ Only the finest for you. Letâ€™s check your all-time favorites.')">Favorites</div>
<div id="genreTab" class="pill" onclick="alert('ğŸ¬ Mood check: Comedy, Action, or Cry-your-eyes-out?')" style="color: white;">By Genre</div>
        </div>
        <div class="hr"></div>
        <div class="muted">Tip: â€œAdd Moviesâ€ is on the right (hidden on phones).</div>
      </div>
      <div class="heroImage">Hero Card (subtle red glow)</div>
    </section>

    <!-- Sections -->
    <div class="sections">
      <!-- Featured Row -->
<section id="featured" class="row">
        <h2>Featured</h2>
        <div class="rail" role="list">
          <div class="tile">Feature A</div>
          <div class="tile">Feature B</div>
          <div class="tile">Feature C</div>
        </div>
      </section>

      <!-- My Library -->
      <section class="row">
        <a id="library"></a>
        <h2>My Library</h2>
        <div class="rail" role="list">
          <div class="tile small">Movie 1</div>
          <div class="tile small">Movie 2</div>
          <div class="tile small">Movie 3</div>
          <div class="tile small">Movie 4</div>
          <div class="tile small">Movie 5</div>
        </div>
      </section>

      <!-- How It Works -->
       <a id="how"></a>
      <section class="row">
        <h2>How It Works</h2>
        <div class="steps">
<div class="step" id="importDiscBtn" onclick="console.log('Clicked Import Disc'); openModal(1)">
  <strong>1) Import Disc</strong><br/>
  <span class="muted">Use XstreamPort to read your DVD.</span>
</div>
<div class="step" onclick="openModal(2)">
  <strong>2) Secure Upload</strong><br/>
  <span class="muted">We store it in your private vault.</span>
</div>
<div class="step" onclick="openModal(3)">
  <strong>3) Stream Anywhere</strong><br/>
  <span class="muted">Play it on TV, phone, or tablet.</span>
</div>        </div>
      </section>

      <!-- Add a New Movie -->
      <section class="row">
        <h2>Add a New Movie</h2>
        <div class="cards">
<div class="card add-movie-box" onclick="startImport()">
  <strong>Import Disc</strong><br/>
  <span class="muted">Connect XstreamPort and start import.</span>
</div>
<div class="card add-movie-box disabled-upload" id="uploadFile" onclick="startUpload()"><strong>Upload File</strong><br/><span class="muted">Already ripped? Upload your file.</span></div>

        </div>
      </section>

      <!-- Your Vault -->
       <a id="vault"></a>
      <section class="row">
        <h2>Your Vault</h2>
        <div class="vault">
          <aside class="side">
            <div class="muted">Folders</div>



            
<div id="folderContainer" class="folders">
  <button class="pill">ğŸ“ All</button>
  <button class="pill">ğŸ­ By Genre</button>
  <button class="pill">ğŸ”¥ Recently Added</button>
  <button class="pill">â­ Favorites</button>
</div>



            <div id="docFolderContainer" class="folders" style="display: none;">
  <button class="btn">Medical</button>
  <button class="btn">Legal</button>
  <button class="btn">School</button>
  <button class="btn">Financial</button>
  <button class="btn">Insurance</button>
  <button class="btn">Receipts</button>
</div>

<!-- PICTURES 2 FOLDER CONTAINER + TILE GRID -->
<div id="pictures2-folderContainer" class="folders" style="display: none;">
  <button class="pill">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family</button>
  <button class="pill">ğŸ’¼ Work</button>
  <button class="pill">ğŸ–ï¸ Trips</button>
  <button class="pill">ğŸ™‹ Personal</button>
  <button class="pill">â­ Favorites</button>
  <button class="pill">ğŸ“‚ Misc</button>
</div>


          </aside>
          <!-- PICTURES GRID -->
<div id="picture-grid" class="folder-grid" style="display: none;" aria-live="polite">
  <button class="tile small"><span class="emoji-tile">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>Family</button>
  <button class="tile small"><span class="emoji-tile">ğŸ’¼</span>Work</button>
  <button class="tile small"><span class="emoji-tile">ğŸ–ï¸</span>Trips</button>
  <button class="tile small"><span class="emoji-tile">ğŸ™‹</span>Personal</button>
  <button class="tile small"><span class="emoji-tile">â­</span>Favorites</button>
  <button class="tile small"><span class="emoji-tile">ğŸ“‚</span>Misc</button>
</div>




<div id="vaultScrollContainer">
  <main>
    
            <div class="tabs" role="tablist">
  <button class="pill" data-tab="movies" role="tab" aria-selected="true">Movies</button>
  <button id="docsBtn" class="pill" data-tab="docs" role="tab">Docs</button>
  <button id="pictures2Btn" class="pill" data-tab="pictures2" role="tab">Pictures </button>
</div>


<div id="pictures2-grid" class="grid" style="display: none;" aria-live="polite">
  <button class="tile small" data-pic="Family"><span class="emoji-tile">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>Family</button>
  <button class="tile small" data-pic="Work"><span class="emoji-tile">ğŸ’¼</span>Work</button>
  <button class="tile small" data-pic="Trips"><span class="emoji-tile">ğŸ–ï¸</span>Trips</button>
  <button class="tile small" data-pic="Personal"><span class="emoji-tile">ğŸ™‹</span>Personal</button>
  <button class="tile small" data-pic="Favorites"><span class="emoji-tile">â­</span>Favorites</button>
  <button class="tile small" data-pic="Misc"><span class="emoji-tile">ğŸ“‚</span>Misc</button>
</div>


<!-- MOVIES CATEGORIES -->
<div id="movieWrapper" style="display: flex; flex-direction: column; min-height: 100px;">
  <div id="movie-grid" class="grid" role="region" aria-live="polite">
  <button class="tile small" data-category="Action"><span class="emoji-tile">ğŸ¬</span>Action</button>
<button class="tile small" data-category="Comedy"><span class="emoji-tile">ğŸ˜‚</span>Comedy</button>
<button class="tile small" data-category="Romance"><span class="emoji-tile">â¤ï¸</span>Romance</button>
<button class="tile small" data-category="Family"><span class="emoji-tile">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>Family</button>
<button class="tile small" data-category="Sci-Fi"><span class="emoji-tile">ğŸ›¸</span>Sci-Fi</button>
<button class="tile small" data-category="Western"><span class="emoji-tile">ğŸ¤ </span>Western</button>
<button class="tile small" data-category="Thriller"><span class="emoji-tile">ğŸ˜±</span>Thriller</button>
<button class="tile small" data-category="Horror"><span class="emoji-tile">ğŸ‘»</span>Horror</button>
<button class="tile small" data-category="Fantasy"><span class="emoji-tile">ğŸ¦„</span>Fantasy</button>
<button class="tile small" data-category="Drama"><span class="emoji-tile">ğŸ­</span>Drama</button>
<button class="tile small" data-category="Crime/Mystery"><span class="emoji-tile">ğŸ•µï¸â€â™‚ï¸</span>Crime/Mystery</button>
<button class="tile small" data-category="Adventure"><span class="emoji-tile">ğŸ§­</span>Adventure</button>
<button class="tile small" data-category="Musical"><span class="emoji-tile">ğŸµ</span>Musical</button>
<button class="tile small" data-category="Documentary"><span class="emoji-tile">ğŸ“½ï¸</span>Documentary</button>
  <div id="family-tile" class="tile small" style="display: none;"></div>
  </div> <!-- end movie-grid -->
</div> <!-- end movieWrapper -->



            <div id="grid" class="grid" role="region" aria-live="polite">
  <button class="tile small" data-doc="Medical"><span class="emoji-tile">ğŸ“„</span>Medical</button>
  <button class="tile small" data-doc="Legal"><span class="emoji-tile">ğŸ“œ</span>Legal</button>
  <button class="tile small" data-doc="School"><span class="emoji-tile">ğŸ“</span>School</button>
  <button class="tile small" data-doc="Financial"><span class="emoji-tile">ğŸ’°</span>Financial</button>
  <button class="tile small" data-doc="Insurance"><span class="emoji-tile">ğŸ›¡ï¸</span>Insurance</button>
  <button class="tile small" data-doc="Receipts"><span class="emoji-tile">ğŸ§¾</span>Receipts</button>
</div>

          </main>
        </div> <!-- closes #vaultScrollContainer -->
      </section>
    </div>
  </div>

    <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-auth-compat.js"></script>


<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDFXR1F20221g5tYwypyrfQf58C0S0wMBfU",
    authDomain: "xstreamify-auth.firebaseapp.com",
    projectId: "xstreamify-auth",
    storageBucket: "xstreamify-auth.appspot.com",
    messagingSenderId: "868542872741",
    appId: "1:868542872741:web:fc3eef7bf0ddaef2cc5358"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)
  .then(() => console.log("Persistence mode: LOCAL âœ…"))
  .catch((err) => console.error("Persistence error:", err));
window.stopRedirect = true; // temporary diagnostic lock

  auth.onAuthStateChanged((user) => {
  if (user) {
    console.log("âœ… User authenticated:", user.email);
    const raw = localStorage.getItem("selectedUser");
    if (raw) {
      const prof = JSON.parse(raw);
      document.getElementById("whoName").textContent = prof.name || "Profile";
document.getElementById("avatar").src = prof.avatar || "https://via.placeholder.com/100";
    }
  } else {
    console.log("âš ï¸ No user found â€” waiting before redirect...");
    // Give Firebase a chance to restore session before redirecting
setTimeout(() => {
  if (firebase.auth().currentUser) {
    console.log("Session restored just in time âœ…");

    if (window.stopRedirect) {
      console.log("ğŸ”„ Redirect prevented for debugging");
    } else {
      window.location.href = "/signin.html";
    }
  }
}, 1500);

  }
});

</script>
<script>
  function signOut() {
    firebase.auth().signOut()
      .then(() => {
        localStorage.removeItem("selectedUser");
        window.location.href = "/signin.html";
      })
      .catch((error) => {
        console.error("Sign-out error:", error);
        alert("Sign out failed. Please try again.");
      });
  }
window.addEventListener("DOMContentLoaded", () => {
  const signoutBtn = document.getElementById("signout");
  if (signoutBtn) {
    signoutBtn.addEventListener("click", (e) => {
      e.preventDefault();
      try {
        localStorage.removeItem("selectedUser");
        localStorage.removeItem("xsf_Library_v1");
        localStorage.removeItem("xs_profile");
        localStorage.removeItem("selectedProfile");
        window.location.href = "/signin.html";
      } catch (error) {
        console.error("Sign-out error:", error);
        alert("Sign out failed. Please try again.");
      }
    });
  } else {
    console.warn("Sign-out button not found");
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  try {
    const raw = localStorage.getItem('xs_profile');
    if (!raw) return;
    const p = JSON.parse(raw);

    // Update top-right name
    const nameEl = document.getElementById('whoName');
    if (nameEl && p.name) nameEl.textContent = p.name;

    // Update top-right avatar
    const imgEl = document.getElementById('avatar');
    if (imgEl && p.img) {
      imgEl.src = p.img;
      imgEl.alt = p.name || 'Profile';
      imgEl.style.visibility = 'visible';
      imgEl.style.opacity = '1';
    }
  } catch (e) { /* ignore */ }
});
</script>



<script>
document.getElementById("search-btn").addEventListener("click", function () {
  const searchInput = document.getElementById("search");
  const query = searchInput.value.trim();
  const resultsBox = document.getElementById("search-results");

  if (!query) {
    resultsBox.textContent = "Please enter a movie title first.";
    return;
  }

  // Simulated search results
  const fakeMovies = ["Elf", "Home Alone", "The Matrix", "Avatar", "The Dark Knight"];
  const matches = fakeMovies.filter(m => m.toLowerCase().includes(query.toLowerCase()));

if (matches.length) {
  resultsBox.style.opacity = '0';
  setTimeout(() => {
    resultsBox.innerHTML = "Results: " + matches.join(", ");
    resultsBox.style.opacity = '1';
  }, 600);
} else {
  resultsBox.style.opacity = '0';
  setTimeout(() => {
    resultsBox.textContent = "No matches found for \"" + query + "\".";
    resultsBox.style.opacity = '1';
  }, 600);
}
  







// Recently Added button logic
document.addEventListener("DOMContentLoaded", () => {
console.log('recentlyAdded =', document.getElementById('recentlyAdded'));
  document.getElementById("recentlyAdded").addEventListener("click", () => {
    const resultsBox = document.getElementById("search-results");
alert("ğŸ”¥ Recently Added clicked!");
  });
});


/*
window.onload = function () {
  console.log("ğŸ”¥ WINDOW ONLOAD WORKS");

  document.querySelector('[data-tab="docs"]').addEventListener("click", () => {
    console.log("ğŸ“„ Docs button clicked");

    const folderContainer = document.getElementById("folderContainer");
    folderContainer.innerHTML = `
      <button class="pill">All</button>
      <button class="pill">Work</button>
      <button class="pill">School</button>
      <button class="pill">Personal</button>
      <button class="pill">Recently Added</button>
    `;

    const folderButtons = folderContainer.querySelectorAll(".pill");
    folderButtons.forEach(button => {
      button.addEventListener("click", () => {
        alert(\`ğŸ“ You clicked on: \${button.textContent}\`);
      });
    });
  });
};
*/




</script>


<div id="unusedContainer" class="grid" role="region" aria-live="polite">

<!-- Modal Container -->
<div id="howItWorksModal" class="modal" style="display: none;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal()">&times;</span>
    <h2 id="stepTitle">Step Title</h2>
    <ul id="stepContent">
      <!-- Steps will be injected here -->
    </ul>
  </div>
</div>
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const docsBtn = document.getElementById("docsBtn");
  const folderContainer = document.getElementById("folderContainer");

  if (docsBtn && folderContainer) {
    docsBtn.addEventListener("click", () => {
      folderContainer.innerHTML = `
        <button class="pill">ğŸ“ All</button>
        <button class="pill">ğŸ“‘ Medical</button>
        <button class="pill">ğŸ“œ Legal</button>
        <button class="pill">ğŸ“ School</button>
        <button class="pill">ğŸ’° Financial</button>
        <button class="pill">ğŸ›¡ï¸ Insurance</button>
        <button class="pill">ğŸ§¾ Receipts</button>
      `;
      folderContainer.style.display = "grid";
    });
  }
});
</script>



 


<script>
  const docBtn = document.querySelector('[data-tab="docs"]');
const movieBtn = document.querySelector('[data-tab="movies"]');
const picturesBtn = document.querySelector('[data-tab="pictures"]');
const pictures2Btn = document.getElementById("pictures2Btn");
console.log("ğŸ“Œ Tabs Loaded", docsBtn, movieBtn, picturesBtn);


  const docGrid = document.querySelector('#grid');          // DOCS
  const movieGrid = document.querySelector('#movie-grid');  // MOVIES
  const pictureGrid = document.getElementById("picture-grid"); // âœ… PICTURES

  const pictures2Grid = document.getElementById("pictures2-grid");           // âœ… PICTURES 2 TILE GRID
  const pictures2FolderContainer = document.getElementById("pictures2-folderContainer"); // âœ… PICTURES 2 FOLDERS

  docBtn.addEventListener("click", () => {
  console.log("ğŸ“„ Docs button clicked");
pictures2Grid.style.display = "none";
pictures2FolderContainer.style.display = "none";

  // âœ… Show Docs grid
  docGrid.style.display = "grid";

  // âŒ Hide Movies and Pictures grids
movieGrid.style.display = "none";
movieGrid.innerHTML = "";
});





pictures2Btn.addEventListener("click", () => {
  console.log("ğŸ–¼ï¸ Pictures 2 button clicked");

  // âœ… Hide all other grids
movieGrid.style.display = "none";
movieGrid.innerHTML = "";
  docGrid.style.display = "none";
  pictureGrid.style.display = "none";

  // âœ… Hide other folder containers
  document.getElementById("folderContainer").style.display = "none";
  document.getElementById("docFolderContainer").style.display = "none";

  // âœ… Show Pictures 2 folder container + grid
  pictures2FolderContainer.style.display = "grid";
  pictures2Grid.style.display = "grid";
});




movieBtn.addEventListener("click", () => {
  console.log("ğŸ¥ Movies button clicked");
  docGrid.style.display = "none";
  pictureGrid.style.display = "none";
  pictures2Grid.style.display = "none"; // âœ… hide Pictures2 tiles
pictures2FolderContainer.style.display = "none"; // âœ… hide Pictures2 folders






// âœ… Restore Movies folders in folderContainer
const folderContainer = document.getElementById("folderContainer");
folderContainer.innerHTML = `
  <button class="pill">ğŸ“ All</button>
  <button class="pill">ğŸ­ By Genre</button>
  <button class="pill">ğŸ”¥ Recently Added</button>
  <button class="pill">â­ Favorites</button>
`;
folderContainer.style.display = "grid";



  // Restore Movie grid HTML
  movieGrid.innerHTML = `
    <button class="tile small"><span class="emoji-tile">ğŸ¬</span>Action</button>
    <button class="tile small"><span class="emoji-tile">ğŸ˜‚</span>Comedy</button>
    <button class="tile small"><span class="emoji-tile">â¤ï¸</span>Romance</button>
    <button class="tile small"><span class="emoji-tile">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>Family</button>
    <button class="tile small"><span class="emoji-tile">ğŸ›¸</span>Sci-Fi</button>
    <button class="tile small"><span class="emoji-tile">ğŸ¤ </span>Western</button>
    <button class="tile small"><span class="emoji-tile">ğŸ˜±</span>Thriller</button>
    <button class="tile small"><span class="emoji-tile">ğŸ‘»</span>Horror</button>
    <button class="tile small"><span class="emoji-tile">ğŸ¦„</span>Fantasy</button>
    <button class="tile small"><span class="emoji-tile">ğŸ­</span>Drama</button>
    <button class="tile small"><span class="emoji-tile">ğŸ•µï¸â€â™‚ï¸</span>Crime/Mystery</button>
    <button class="tile small"><span class="emoji-tile">ğŸ§­</span>Adventure</button>
    <button class="tile small"><span class="emoji-tile">ğŸµ</span>Musical</button>
    <button class="tile small"><span class="emoji-tile">ğŸ“½ï¸</span>Documentary</button>
  `;

  movieGrid.style.display = "grid";
  
});






  // ğŸ‘‡ Default to movies view on first load
  movieGrid.style.display = 'grid';
  docGrid.style.display = 'none';
</script>




<script>
document.addEventListener("DOMContentLoaded", () => {
  const searchBtn = document.getElementById("search-btn");
  const searchInput = document.getElementById("searchInput");
  const resultsBox = document.getElementById("search-results");

  if (searchBtn && searchInput && resultsBox) {
    searchBtn.addEventListener("click", () => {
const query = searchInput.value.toLowerCase().trim();
console.log("ğŸ” Searching for:", query);
      resultsBox.innerHTML = `ğŸ”¹ You searched for: <strong>${query}</strong>`;
    });
  } else {
    console.warn("âŒ Search input or button not found");
  }
});
</script>




<script>
  document.addEventListener("DOMContentLoaded", () => {
    const searchBtn = document.getElementById("search-btn");
    const searchInput = document.getElementById("searchInput");
    const resultsBox = document.getElementById("search-results");

    if (searchBtn && searchInput && resultsBox) {
      searchBtn.addEventListener("click", () => {
        const query = searchInput.value.toLowerCase().trim();
        console.log("ğŸ”µ Searching for:", query);
        resultsBox.innerHTML = `ğŸ”· You searched for: <strong>${query}</strong>`;
      });
    } else {
      console.warn("âŒ Search input or button not found");
    }
  });
</script>



<script>
  window.openModal = function(step) {
    const modal = document.getElementById("howItWorksModal");
const modalTitle = document.getElementById("stepTitle");
const content = document.getElementById("stepContent");
    let steps = [];

    if (step === 1) {
      modalTitle.textContent = "Step 1: Import Disc";
      steps = [
        "âœ… Use your computer's built-in DVD drive â€” or plug in any external USB DVD drive",
        "âœ… For the best experience, you can also use your XstreamPort device (coming soon!)",
        "âœ… Make sure your disc is clean and not scratched for smooth importing",
        "âœ… Launch the X-Streamify Import Tool (we'll walk you through it)",
        "âœ… Wait for your disc to scan, then click 'Save to Vault' to finish",
        "ğŸ“Œ Note: Smart TVs can't read discs directly. You'll need to upload from a computer first."
      ];
    }
else if (step === 2) {
  modalTitle.textContent = "Step 2: Secure Upload";
  steps = [
    "ğŸ” Upload the movie file from your computer or external drive",
    "ğŸ–¥ï¸ Supported formats: MP4, MKV, AVI, MOV",
    "ğŸ’¡ Files must be under 5GB for best performance",
    "ğŸ“ Once uploaded, it will appear in your library under 'My Movies'",
    "âœ… Make sure your internet connection is stable during the upload"
  ];
} else if (step === 3) {
  modalTitle.textContent = "Step 3: Stream Anywhere";
  steps = [
    "ğŸ“º Stream your uploaded movies from any device",
    "ğŸ” You control who can watch â€” your vault is private by default",
    "ğŸ“± Works on Smart TVs, phones, tablets, and computers",
    "ğŸŒ All files stream securely with no re-downloads needed",
    "ğŸ‰ Press play and enjoy your personal movie library!"
  ];
}

    

    content.innerHTML = "";
    steps.forEach(step => {
      const li = document.createElement("li");
      li.textContent = step;
      content.appendChild(li);
    });

    modal.style.display = "flex";
  };

window.closeModal = function () {
  const modal = document.getElementById("howItWorksModal");
  if (modal) modal.style.display = "none";
};

  
</script>

<script>
  // (your window.openModal = function(step) { ... } is already here)

  document.addEventListener("DOMContentLoaded", () => {
    const closeBtn = document.querySelector(".close-btn");
    if (closeBtn) {
      closeBtn.addEventListener("click", () => {
        const modal = document.getElementById("howItWorksModal");
        modal.style.display = "none";
      });
    }
  });
</script>


<script>
window.startImport = function () {
  const importBox = document.querySelector('.card.add-movie-box');
  if (!importBox) return;

  // Start pulse animation
  importBox.classList.add('importing');
  console.log('ğŸ“€ Import started...');

  // Create progress bar if not present
  let existingBar = document.getElementById("importProgressContainer");
  if (!existingBar) {
    const container = document.createElement("div");
    container.id = "importProgressContainer";
    container.style = `
      margin-top: 12px;
      width: 100%;
      height: 16px;
      background-color: #333;
      border-radius: 8px;
      overflow: hidden;
    `;
    container.innerHTML = `
      <div id="importProgressBar" style="
        height: 100%;
        width: 0%;
        background-color: lime;
        transition: width 0.3s ease;
      "></div>
    `;
    importBox.appendChild(container);
  }

  const bar = document.getElementById("importProgressBar");
  const container = document.getElementById("importProgressContainer");
  container.style.display = "block";
  bar.style.width = "0%";

  // Animate bar fill
  let progress = 0;
  const interval = setInterval(() => {
    progress += 5;
    bar.style.width = progress + "%";
    if (progress >= 100) {
      clearInterval(interval);
      importBox.classList.remove('importing');
      importBox.classList.add('disabled');
      // Enable Upload File block
const uploadFile = document.getElementById("uploadFile");
uploadFile.classList.remove("disabled-upload");
      console.log('âœ… Import complete.');
      setTimeout(() => {
        container.style.display = "none";
        bar.style.width = "0%";
      }, 1000);
    }
  }, 100);
};
</script>



<script>
window.startUpload = function () {
  const uploadBox = document.querySelectorAll('.card.add-movie-box')[1];
  if (!uploadBox) return;

  // Start pulse animation
  uploadBox.classList.add('importing');
  console.log('ğŸ“¤ Upload started...');

  // Create progress bar if not present
  let existingBar = document.getElementById("uploadProgressContainer");
  if (!existingBar) {
    const container = document.createElement("div");
    container.id = "uploadProgressContainer";
    container.style = `
      margin-top: 12px;
      width: 100%;
      height: 16px;
      background-color: #333;
      border-radius: 8px;
      overflow: hidden;
    `;
    container.innerHTML = `
      <div id="uploadProgressBar" style="
        height: 100%;
        width: 0%;
        background-color: lime;
        transition: width 0.3s ease;
      "></div>
    `;
    uploadBox.appendChild(container);
  }


  
  const bar = document.getElementById("uploadProgressBar");
  const container = document.getElementById("uploadProgressContainer");
  container.style.display = "block";
  bar.style.width = "0%";

  // Animate bar fill
  let progress = 0;
  const interval = setInterval(() => {
    progress += 5;
    bar.style.width = progress + "%";
    if (progress >= 100) {
      clearInterval(interval);
      uploadBox.classList.remove('importing');
      uploadBox.classList.add('disabled');
      console.log('âœ… Upload complete.');
      showUploadComplete();
      setTimeout(() => {
        container.style.display = "none";
        bar.style.width = "0%";
        document.querySelectorAll('.card.add-movie-box')[1].classList.remove('disabled');
      }, 1000);
    }
  }, 100);
};
</script>


<div id="uploadCompleteModal" class="upload-modal" style="display: none;">
  <div class="upload-modal-content">
    <span class="close" onclick="closeUploadComplete()">&times;</span>
    <p>âœ… Upload complete!</p>
  </div>
</div>




<script>
function showUploadComplete() {
  const modal = document.getElementById("uploadCompleteModal");
  modal.style.display = "block";
}

function closeUploadComplete() {
  const modal = document.getElementById("uploadCompleteModal");
  modal.style.display = "none";

  // Reactivate Import Disc (start over)
  const importBox = document.querySelector('.card.add-movie-box');
  importBox.classList.remove('disabled');

  // Disable Upload File again (wait for new import)
  const uploadFile = document.getElementById("uploadFile");
  uploadFile.classList.add("disabled-upload");
}
</script>


<script>


function showUploadComplete() {
  const modal = document.getElementById('uploadCompleteModal');
  if (modal) {
    modal.style.display = 'block';
  }
}

function toggleVault(category) {
  document.querySelectorAll('.movies-folder, .tn-folder, .pictures-folder').forEach(block => {
    block.style.display = 'none';
  });

  if (category === 'movies') {
    document.querySelectorAll('.movies-folder').forEach(block => {
      block.style.display = 'block';
    });
  } else if (category === 'docs') {
    document.querySelectorAll('.docs-folder').forEach(block => {
      block.style.display = 'block';
    });
  } else if (category === 'pictures') {
    document.querySelectorAll('.pictures-folder').forEach(block => {
      block.style.display = 'block';
    });
  }
}

toggleVault('movies');
</script>






<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import {
    getFirestore,
    collection,
    query,
    where,
    getDocs
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // Your Firebase config
  const firebaseConfig = {
  apiKey: "AIzaSyCQvGM6GY4vUDhTOVvTsMr8-buC6fhizHs",
  authDomain: "xstreamify-auth.firebaseapp.com",
  projectId: "xstreamify-auth",
  storageBucket: "xstreamify-auth.appspot.com",
  messagingSenderId: "868454287241",
  appId: "1:868454287241:web:fc3eef7bf8ddae2f2cc5358"
};


  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Load movies by category
  async function loadMoviesByCategory(category) {
    const movieGrid = document.getElementById("movie-grid");
    movieGrid.innerHTML = ""; // Clear grid

    const q = query(
      collection(db, "movies"),
      where("category", "==", category)
    );

    const querySnapshot = await getDocs(q);

    allMovies = [];
querySnapshot.forEach((doc) => {
  allMovies.push(doc.data());
});
currentPage = 1;
renderMoviesPage();


    if (querySnapshot.empty) {
      console.warn("No movies found in category:", category);
    }
  }

  // Step 2: Handle only Movies folder buttons
const movieFolderButtons = document.querySelectorAll('#movie-folder-controls .pill');

movieFolderButtons.forEach(button => {
  button.addEventListener("click", () => {
    movieFolderButtons.forEach(btn => btn.classList.remove("active"));
    button.classList.add("active");

    const folder = button.dataset.folder;
    if (folder === "All") {
      loadMoviesByCategory("All");
    } else if (folder === "Favorites") {
      loadMoviesByCategory("Favorites");
    } else if (folder === "Recently") {
      loadMoviesByCategory("Recently");
    } else if (folder === "ByGenre") {
      loadMoviesByCategory("Family");
    }
  });
});


  // Handle Family button click
  const familyBtn = document.querySelector('[data-category="Family"]');
  if (familyBtn) {
    familyBtn.addEventListener("click", () => {
      console.log("ğŸ¬ Family button clicked");
      loadMoviesByCategory("Family");
    });
  } else {
    console.warn("âŒ Family button not found");
  }
  // Handle Action button click
const actionBtn = document.querySelector('[data-category="Action"]');
if (actionBtn) {
  actionBtn.addEventListener("click", () => {
    console.log("ğŸ¬ Action button clicked");
    loadMoviesByCategory("Action");
  });
} else {
  console.warn("âŒ Action button not found");
}
const comedyBtn = document.querySelector('[data-category="Comedy"]');
if (comedyBtn) {
  comedyBtn.addEventListener("click", () => {
    console.log("ğŸ­ Comedy button clicked");
    loadMoviesByCategory("Comedy");
  });
} else {
  console.warn("âŒ Comedy button not found");
}

const romanceBtn = document.querySelector('[data-category="Romance"]');
if (romanceBtn) {
  romanceBtn.addEventListener("click", () => {
    console.log("ğŸ’˜ Romance button clicked");
    loadMoviesByCategory("Romance");
  });
} else {
  console.warn("âŒ Romance button not found");
}

const sciFiBtn = document.querySelector('[data-category="Sci-Fi"]');
if (sciFiBtn) {
  sciFiBtn.addEventListener("click", () => {
    console.log("ğŸ›¸ Sci-Fi button clicked");
    loadMoviesByCategory("Sci-Fi");
  });
} else {
  console.warn("âŒ Sci-Fi button not found");
}

const westernBtn = document.querySelector('[data-category="Western"]');
if (westernBtn) {
  westernBtn.addEventListener("click", () => {
    console.log("ğŸ¤  Western button clicked");
    loadMoviesByCategory("Western");
  });
} else {
  console.warn("âŒ Western button not found");
}

const thrillerBtn = document.querySelector('[data-category="Thriller"]');
if (thrillerBtn) {
  thrillerBtn.addEventListener("click", () => {
    console.log("ğŸ˜± Thriller button clicked");
    loadMoviesByCategory("Thriller");
  });
} else {
  console.warn("âŒ Thriller button not found");
}
const horrorBtn = document.querySelector('[data-category="Horror"]');
if (horrorBtn) {
  horrorBtn.addEventListener("click", () => {
    console.log("ğŸ‘» Horror button clicked");
    loadMoviesByCategory("Horror");
  });
} else {
  console.warn("âŒ Horror button not found");
}

const fantasyBtn = document.querySelector('[data-category="Fantasy"]');
if (fantasyBtn) {
  fantasyBtn.addEventListener("click", () => {
    console.log("ğŸ¦„ Fantasy button clicked");
    loadMoviesByCategory("Fantasy");
  });
} else {
  console.warn("âŒ Fantasy button not found");
}

const dramaBtn = document.querySelector('[data-category="Drama"]');
if (dramaBtn) {
  dramaBtn.addEventListener("click", () => {
    console.log("ğŸ­ Drama button clicked");
    loadMoviesByCategory("Drama");
  });
} else {
  console.warn("âŒ Drama button not found");
}

const crimeMysteryBtn = document.querySelector('[data-category="Crime/Mystery"]');
if (crimeMysteryBtn) {
  crimeMysteryBtn.addEventListener("click", () => {
    console.log("ğŸ•µï¸â€â™‚ï¸ Crime/Mystery button clicked");
    loadMoviesByCategory("Crime/Mystery");
  });
} else {
  console.warn("âŒ Crime/Mystery button not found");
}

const adventureBtn = document.querySelector('[data-category="Adventure"]');
if (adventureBtn) {
  adventureBtn.addEventListener("click", () => {
    console.log("ğŸ§­ Adventure button clicked");
    loadMoviesByCategory("Adventure");
  });
} else {
  console.warn("âŒ Adventure button not found");
}

const musicalBtn = document.querySelector('[data-category="Musical"]');
if (musicalBtn) {
  musicalBtn.addEventListener("click", () => {
    console.log("ğŸµ Musical button clicked");
    loadMoviesByCategory("Musical");
  });
} else {
  console.warn("âŒ Musical button not found");
}

const documentaryBtn = document.querySelector('[data-category="Documentary"]');
if (documentaryBtn) {
  documentaryBtn.addEventListener("click", () => {
    console.log("ğŸ“½ï¸ Documentary button clicked");
    loadMoviesByCategory("Documentary");
  });
} else {
  console.warn("âŒ Documentary button not found");
}


</script>



<script>
document.addEventListener("DOMContentLoaded", () => {
  const folderContainer = document.getElementById("folderContainer");

  if (folderContainer) {
    const buttons = folderContainer.querySelectorAll("button");

    buttons.forEach(btn => {
      btn.addEventListener("click", () => {
        // Remove 'active' state from all
        buttons.forEach(b => b.classList.remove("active"));

        // Highlight current
        btn.classList.add("active");

        // Log selected folder
        const text = btn.textContent.trim();
        console.log("ğŸ“‚ Folder clicked:", text);
      });
    });
  } else {
    console.warn("âŒ folderContainer not found");
  }
});
</script>


<script>
let currentFamilyPage = 1;
const moviesPerPage = 6;
let familyMovies = [];

function renderFamilyMoviesPage() {
  const startIndex = (currentFamilyPage - 1) * moviesPerPage;
  const endIndex = startIndex + moviesPerPage;
  const pageMovies = familyMovies.slice(startIndex, endIndex);

  const vault = document.getElementById("vault");
  vault.innerHTML = "";

  pageMovies.forEach((movie) => {
    const tile = document.createElement("div");
    tile.className = "tile small";
    tile.innerHTML = `
      <video controls width="100%">
        <source src="${movie.url}" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <p>${movie.title}</p>
    `;
    vault.appendChild(tile);
  });

  renderPaginationControls();
}

function renderPaginationControls() {
  const totalPages = Math.ceil(familyMovies.length / moviesPerPage);
  const vault = document.getElementById("vault");

  const controls = document.createElement("div");
  controls.style.display = "flex";
  controls.style.justifyContent = "center";
  controls.style.marginTop = "20px";
  controls.innerHTML = `
    <button id="prevPage">Previous</button>
    <span style="margin: 0 10px;">Page ${currentFamilyPage} of ${totalPages}</span>
    <button id="nextPage">Next</button>
  `;
  vault.appendChild(controls);

  document.getElementById("prevPage").onclick = () => {
    if (currentFamilyPage > 1) {
      currentFamilyPage--;
      renderFamilyMoviesPage();
    }
  };
  document.getElementById("nextPage").onclick = () => {
    if (currentFamilyPage < totalPages) {
      currentFamilyPage++;
      renderFamilyMoviesPage();
    }
  };
}

document.querySelector('[data-category="Family"]').addEventListener("click", async () => {
  currentFamilyPage = 1;
  const querySnapshot = await getDocs(collection(db, "movies"));
  familyMovies = [];
  querySnapshot.forEach((doc) => {
    const data = doc.data();
    if (data.category === "Family") {
      familyMovies.push({
        title: data.title,
        url: data.url,
      });
    }
  });
  renderFamilyMoviesPage();
});

// âœ… Pagination Setup
let currentPage = 1;
const itemsPerPage = 4;
let allMovies = [];

// Render movies for current page
function renderMoviesPage() {
  const movieGrid = document.getElementById("movie-grid");
  movieGrid.innerHTML = ""; // Clear previous tiles

  const start = (currentPage - 1) * itemsPerPage;
  const end = start + itemsPerPage;
  const pageItems = allMovies.slice(start, end);

  pageItems.forEach((data) => {
    const tile = document.createElement("div");
    tile.className = "tile small";
    tile.innerHTML = `
      <video controls width="100%">
        <source src="${data.url}" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <p>${data.title || "Untitled Movie"}</p>
    `;
    movieGrid.appendChild(tile);
  });

  injectPaginationControls();
}

// Inject Next/Previous buttons at bottom-center of movie grid
function injectPaginationControls() {
  let existing = document.getElementById("pagination-controls");
  if (existing) return; // only inject once

  const container = document.createElement("div");
  container.id = "pagination-controls";
  container.style = "text-align: center; margin-top: 20px; width: 100%;";

  const grid = document.getElementById("movie-grid");
if (grid && grid.children.length === 0) {
  const spacer = document.createElement("div");
  spacer.style.height = "150px"; // â¬…ï¸ adjust this as needed
  grid.appendChild(spacer);
}

  container.innerHTML = `
  <button id="prevPageBtn" class="btn" style="margin-right: 100px;">â¬…ï¸ Previous</button>
  <button id="nextPageBtn" class="btn">Next â¡ï¸</button>
  <p style="margin-top: 8px; color: var(--muted);">Page ${currentPage} of ${Math.ceil(allMovies.length / itemsPerPage)}</p>
`;


  document.getElementById("movie-grid").after(container);

  document.getElementById("prevPageBtn").addEventListener("click", () => {
    if (currentPage > 1) {
      currentPage--;
      renderMoviesPage();
    }
  });

  document.getElementById("nextPageBtn").addEventListener("click", () => {
    if (currentPage * itemsPerPage < allMovies.length) {
      currentPage++;
      renderMoviesPage();
    }
  });
}

</script>


<script type="module">
import {
  getFirestore,
  collection,
  query,
  where,
  getDocs
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const db = getFirestore();

let currentDocPage = 1;
const docsPerPage = 6;
let currentDocs = [];

function renderDocsPage() {
  const docGrid = document.getElementById("grid");
  docGrid.innerHTML = "";

  const start = (currentDocPage - 1) * docsPerPage;
  const end = start + docsPerPage;
  const pageItems = currentDocs.slice(start, end);

  pageItems.forEach((docData) => {
    const tile = document.createElement("div");
    tile.className = "tile small";
    tile.innerHTML = `
      <div>
        <p><strong>${docData.title || "Untitled Document"}</strong></p>
        <p style="font-size: 12px; color: var(--muted);">${docData.description || "No description"}</p>
      </div>
    `;
    docGrid.appendChild(tile);
  });

  injectDocPaginationControls();
}

function injectDocPaginationControls() {
  let existing = document.getElementById("pagination-controls");
  if (existing) existing.remove();

  const container = document.createElement("div");
  container.id = "pagination-controls";
  container.style = "text-align: center; margin-top: 20px; width: 100%;";

  const docGrid = document.getElementById("grid");
if (docGrid && docGrid.children.length === 0) {
  const spacer = document.createElement("div");
  spacer.style.height = "150px"; // same height used in Movies
  docGrid.appendChild(spacer);
}

  const totalPages = Math.ceil(currentDocs.length / docsPerPage);
  container.innerHTML = `
    <button id="prevDocPageBtn" class="btn" style="margin-right: 100px;">â¬…ï¸ Previous</button>
    <button id="nextDocPageBtn" class="btn">Next â¡ï¸</button>
    <p style="margin-top: 8px; color: var(--muted);">Page ${currentDocPage} of ${totalPages}</p>
  `;

  document.getElementById("grid").after(container);

  document.getElementById("prevDocPageBtn").onclick = () => {
    if (currentDocPage > 1) {
      currentDocPage--;
      renderDocsPage();
    }
  };
  document.getElementById("nextDocPageBtn").onclick = () => {
    if (currentDocPage < totalPages) {
      currentDocPage++;
      renderDocsPage();
    }
  };
}

async function loadDocsByCategory(docType) {
  currentDocPage = 1;
  const q = query(collection(db, "docs"), where("category", "==", docType));
  const querySnapshot = await getDocs(q);
  currentDocs = [];
  querySnapshot.forEach((doc) => currentDocs.push(doc.data()));
  renderDocsPage();
}

const docFolderButtons = document.querySelectorAll('[data-doc]');
docFolderButtons.forEach(button => {
  button.addEventListener("click", () => {
    docFolderButtons.forEach(b => b.classList.remove("active"));
    button.classList.add("active");
    const folder = button.getAttribute("data-doc");
    console.log("ğŸ“ Loading Docs folder:", folder);
    loadDocsByCategory(folder);
  });
});
</script>


<script type="module">
import {
  getFirestore,
  collection,
  query,
  where,
  getDocs
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const db = getFirestore();

let currentPicPage = 1;
const picsPerPage = 6;
let currentPics = [];

function renderPicturesPage() {
  const picGrid = document.getElementById("pictures2-grid");
  picGrid.innerHTML = "";

  const start = (currentPicPage - 1) * picsPerPage;
  const end = start + picsPerPage;
  const pageItems = currentPics.slice(start, end);

  pageItems.forEach((picData) => {
    const tile = document.createElement("div");
    tile.className = "tile small";
    tile.innerHTML = `
      <img src="${picData.url}" alt="${picData.title || 'Untitled Picture'}" style="width: 100%; border-radius: 8px;">
      <p>${picData.title || "Untitled Picture"}</p>
    `;
    picGrid.appendChild(tile);
  });

  injectPicPaginationControls();
}

function injectPicPaginationControls() {
  let existing = document.getElementById("pagination-controls");
  if (existing) existing.remove();

  const container = document.createElement("div");
  container.id = "pagination-controls";
  container.style = "text-align: center; margin-top: 20px; width: 100%;";

  const picGrid = document.getElementById("pictures2-grid");
if (picGrid && picGrid.children.length === 0) {
  const spacer = document.createElement("div");
  spacer.style.height = "150px"; // âœ… same as Movies
  picGrid.appendChild(spacer);
}

  const totalPages = Math.ceil(currentPics.length / picsPerPage);
  container.innerHTML = `
    <button id="prevPicPageBtn" class="btn" style="margin-right: 100px;">â¬…ï¸ Previous</button>
    <button id="nextPicPageBtn" class="btn">Next â¡ï¸</button>
    <p style="margin-top: 8px; color: var(--muted);">Page ${currentPicPage} of ${totalPages}</p>
  `;

document.getElementById("pictures2-grid").insertAdjacentElement("afterend", container);

  document.getElementById("prevPicPageBtn").onclick = () => {
    if (currentPicPage > 1) {
      currentPicPage--;
      renderPicturesPage();
    }
  };
  document.getElementById("nextPicPageBtn").onclick = () => {
    if (currentPicPage < totalPages) {
      currentPicPage++;
      renderPicturesPage();
    }
  };
}

async function loadPicturesByCategory(picType) {
  currentPicPage = 1;
  const q = query(collection(db, "pictures"), where("category", "==", picType));
  const querySnapshot = await getDocs(q);
  currentPics = [];
  querySnapshot.forEach((doc) => currentPics.push(doc.data()));
  renderPicturesPage();
}

const picFolderButtons = document.querySelectorAll('#pictures2-grid [class*="tile"]');
picFolderButtons.forEach(button => {
  button.addEventListener("click", () => {
    picFolderButtons.forEach(b => b.classList.remove("active"));
    button.classList.add("active");
    const folder = button.textContent.trim();
    console.log("ğŸ–¼ï¸ Loading Pictures folder:", folder);
    loadPicturesByCategory(folder);
  });
});
</script>




</body>
</html>
